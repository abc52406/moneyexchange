<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta http-equiv="pragma" content="no-cache" />
    <title>金额大小写转换</title>
	<style type="text/css">
        html {
            overflow: hidden;
        }
		#main{
		    padding: 5px;
			font-size: 20px;
		}
		p{
			margin: 5px 0;
		}
		input,textarea{
		    width: 100%;
			height: 20px;
			line-height: 20px;
			padding: 20px 0;
			font-size: 20px;
		}
		textarea{
			height: 50px;
		}
    </style>

</head>
<body>
    <div id="main">
		<p>数字：</p>
        <input type="text" id="input-number" placeholder="请输入小写金额" onkeypress="numberchange()" onkeydown="numberchange()" onkeyup="numberchange()" />
		<p>转换结果：</p>
        <textarea type="text" rows="3" id="input-chinese" placeholder="转换结果" ></textarea>
	</div>
</body>
</html>
<script>
function numberchange(){
document.getElementById("input-chinese").value=DX(document.getElementById("input-number").value);
}
function DX(n) {
	if(!n)
		return '';
    if (!/^(0|[1-9]\d*)(\.\d+)?$/.test(n))
        return "数据非法";
    var unit = "千百拾亿千百拾万千百拾元角分", str = "";
        n += "00";
    var p = n.indexOf('.');
    if (p >= 0)
        n = n.substring(0, p) + n.substr(p+1, 2);
        unit = unit.substr(unit.length - n.length);
    for (var i=0; i < n.length; i++)
        str += '零壹贰叁肆伍陆柒捌玖'.charAt(n.charAt(i)) + unit.charAt(i);
    return str.replace(/零(千|百|拾|角)/g, "零").replace(/(零)+/g, "零").replace(/零(万|亿|元)/g, "$1").replace(/(亿)万|壹(拾)/g, "$1$2").replace(/^元零?|零分/g, "").replace(/元$/g, "元整");
}
</script>
